#  (C) Copyright William E. Kempf 2001. Permission to copy, use, modify, sell and
#  distribute this software is granted provided this copyright notice appears
#  in all copies. This software is provided "as is" without express or implied
#  warranty, and with no claim as to its suitability for any purpose.
#
# Boost.Threads build and test Jamfile
#
# Declares the following targets:
#   1. monitor, an example program.
#   2. starvephil, an example program.
#   3. tennis, an example program.

# declare the location of this subproject relative to the root
subproject libs/thread/example ;

# declare BUILD_THREADMON to 0 (just in case the user defined it) so that threads.jam
# knows what to do with <dll>boost_threadmon
BUILD_THREADMON = 0 ;

# include threads.jam for Boost.Threads global build information
SEARCH on <module@>threads.jam = $(BOOST_ROOT)/libs/thread/build ;
include <module@>threads.jam ;

#######################
# Declare the Boost.Threads monitor example program.

exe monitor : monitor/monitor.cpp
    <lib>../build/boost_thread
    $(BOOST_THREADMON_DLL) # if on Win32 and not using pthreads-win32
    # requirements
    : <include>$(BOOST_ROOT)
    $(PTW32_REQUIREMENTS) # if using pthreads-win32
    <threading>multi
    <runtime-link>static/dynamic
    : debug release ;

#######################
# Declare the Boost.Threads starvephil example program.

exe starvephil : starvephil/starvephil.cpp
    <lib>../build/boost_thread
    $(BOOST_THREADMON_DLL) # if on Win32 and not using pthreads-win32
    # requirements
    : <include>$(BOOST_ROOT)
    $(PTW32_REQUIREMENTS) # if using pthreads-win32
    <threading>multi
    <runtime-link>static/dynamic
    : debug release ;

#######################
# Declare the Boost.Threads tennis example program.

exe tennis : tennis/tennis.cpp
    <lib>../build/boost_thread
    $(BOOST_THREADMON_DLL) # if on Win32 and not using pthreads-win32
    # requirements
    : <include>$(BOOST_ROOT)
    $(PTW32_REQUIREMENTS) # if using pthreads-win32
    <threading>multi
    <runtime-link>static/dynamic
    : debug release ;
